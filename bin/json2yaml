#!/usr/bin/env ruby
# frozen_string_literal: true

require 'json'
require 'yaml'

def json2yaml(str)
  YAML.dump(JSON.parse(str))
end

from = ARGV[0]
if from && File.exist?(from)
  to = ARGV[1] || from.chomp('.json') + '.yaml'

  File.write(to, json2yaml(File.read(from)))
elsif from
  puts json2yaml(from)
elsif not STDIN.tty? and not STDIN.closed?
  puts json2yaml(STDIN.read)
end
